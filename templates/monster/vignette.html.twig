{% extends 'base.html.twig' %}

{% block title %}Le Bestiaire{% endblock %}

{% block stylesheets %}

<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<link rel='stylesheet' type='text/css' href='{{ absolute_url(asset('css/bestiaire.css')) }}'>
<script src="https://kit.fontawesome.com/9f32cf0958.js" crossorigin="anonymous"></script>
{% endblock %}

{% block body %}
<div id ="navigation">
    <a href="https://cyber-rpg.forumactif.com/" id="returnForum"><i class="fas fa-arrow-left"></i> Retourner sur le Forum</a>
    <a href="" id="seeMonster"><i class="fas fa-eye"></i>Voir l'ensemble des Monstres</a>
</div>
<div id="region">
    <div class="content-nav">
    </div>
</div>
<div id="regionDesc">
    <img src="https://i.imgur.com/4c32KVw.jpg">
        <div class="content">
            <h2>Le Bestiaire</h2>
            <p>On vous met une dague sous le cou et on traverse le camp en gueulant "bougez-pas, bougez-pas ou un bute le roi". Et on peut savoir depuis quand vous arpentez la Bretagne en racontant à tout le monde que vous vous appelez Provençal le Gaulois? Sans vouloir abuser. Il me semble pas que vous soyez provençal non plus… Léodagan et moi on fait semblant de vous prendre en otage. Alors là! Permettez-moi de vous dire! Le coup du mystérieux chevalier gaulois solitaire à la rescousse de l’opprimé. Ca fait vraiment bidon comme légende! Bon alors en garde, fils d’unijambiste.
<br/><br/>
C’est la salle du trône. Il ferait beau voir que je puisse pas y rentrer! Léodagan et moi on fait semblant de vous prendre en otage.</p>
    </div>
</div>
<div id="monster">

</div>

<div id="arrowUp">
    <a><i class="fas fa-arrow-up"></i></a>
</div>
<script>
let regions = [ {"name" : "La Chaîne de l’Himalaya","value" : "1","slug" : "la-chaine-de-l-himalaya","description" : "à venir","part" : "<i class='fas fa-icicles'></i>Les Terres Glaciales","danger" : "Argent","image" : "https://i.imgur.com/4c32KVw.jpg","monsters" :[ ]}, {"name" : "L’Himalaya","value" : "1","slug" : "l-himalaya","description" : "à venir","part" : "<i class='fas fa-icicles'></i>Les Terres Glaciales","danger" : "Obsidienne","image" : "https://i.imgur.com/4c32KVw.jpg","monsters" :[ ]}, {"name" : "Les Plaines de Glace","value" : "1","slug" : "les-plaines-de-glace","description" : "à venir","part" : "<i class='fas fa-icicles'></i>Les Terres Glaciales","danger" : "Bronze - Argent","image" : "https://i.imgur.com/4c32KVw.jpg","monsters" :[ ]}, {"name" : "La Sibérie","value" : "1","slug" : "la-siberie","description" : "à venir","part" : "<i class='fas fa-icicles'></i>Les Terres Glaciales","danger" : "Or - Obsidienne","image" : "https://i.imgur.com/4c32KVw.jpg","monsters" :[ ]}, {"name" : "Les îles perdues","value" : "1","slug" : "les-iles-perdues","description" : "à venir","part" : "<i class='fas fa-water'></i>Les Îles Anciennes","danger" : "Bronze - Argent","image" : "https://i.imgur.com/4c32KVw.jpg","monsters" :[ ]}, {"name" : "L’Île de la Mort","value" : "1","slug" : "l-ile-de-la-mort","description" : "à venir","part" : "<i class='fas fa-water'></i>Les Îles Anciennes","danger" : "Obsidienne","image" : "https://i.imgur.com/4c32KVw.jpg","monsters" :[ ]}, {"name" : "L’île aux Dinosaurs","value" : "1","slug" : "l-ile-aux-dinosaurs","description" : "à venir","part" : "<i class='fas fa-water'></i>Les Îles Anciennes","danger" : "Or - Obsidienne","image" : "https://i.imgur.com/4c32KVw.jpg","monsters" :[ ]}, {"name" : "Les ruines de Neo-Beijing","value" : "1","slug" : "les-ruines-de-neo-beijing","description" : "à venir","part" : "<i class='fas fa-tree'></i>Les Plaines du Cang Qiong","danger" : "Bronze - Argent","image" : "https://i.imgur.com/4c32KVw.jpg","monsters" :[ ]}, {"name" : "les Vastes Plaines Chinoises","value" : "1","slug" : "les-vastes-plaines-chinoises","description" : "à venir","part" : "<i class='fas fa-tree'></i>Les Plaines du Cang Qiong","danger" : "Bronze - Argent","image" : "https://i.imgur.com/4c32KVw.jpg","monsters" :[ ]}, {"name" : "La Forêt Indienne","value" : "1","slug" : "la-foret-indienne","description" : "à venir","part" : "<i class='fas fa-tree'></i>Les Plaines du Cang Qiong","danger" : "Argent - Or","image" : "https://i.imgur.com/4c32KVw.jpg","monsters" :[ ]}, {"name" : "La Plaine Foudroyée","value" : "1","slug" : "la-plaine-foudroyee","description" : "à venir","part" : "<i class='fas fa-sun'></i>Le Grand Désert","danger" : "Or","image" : "https://i.imgur.com/4c32KVw.jpg","monsters" :[ {"name" : "Pampa","image" : "https://i.imgur.com/MGmn8xO.jpg","description" : "à venir","rarete" : "Rare","deMin" : "1","deMax" : "10","rang" : "Or"}, {"name" : "Kirin","image" : "https://i.imgur.com/NIT1z2T.jpg","description" : "à venir","rarete" : "Légendaire","deMin" : "100","deMax" : "100","rang" : "Or Noir"}, ]}, {"name" : "L’Enfer sur Terre","value" : "1","slug" : "l-enfer-sur-terre","description" : "à venir","part" : "<i class='fas fa-sun'></i>Le Grand Désert","danger" : "Obsidienne","image" : "https://i.imgur.com/4c32KVw.jpg","monsters" :[ {"name" : "Nergigante","image" : "https://i.imgur.com/bruntYE.jpg","description" : "Le Nergigante est un Dragon ancien qui arbore une très grosse armure d'écailles et de pics saillants marrons beiges, avec des teintes de rouge sur son abdomen. Cependant, ses deux caractéristiques les plus remarquables sont son extraordinaire force couplée à une immense paire de corne.<br/><br/> Le Nergigante est un dragon extrêmement agressif, d’où son surnom de dragon destructeur ou de dévoreur des anciens. En effet, ce dernier est si agressif qu'il n'hésite pas à tuer quiconque croisant son chemin sans prendre garde à son propre corps.","rarete" : "Légendaire","deMin" : "100","deMax" : "100","rang" : "Or Noir"}, ]}, {"name" : "L’Oasis des Réfugiés","value" : "1","slug" : "l-oasis-des-refugies","description" : "à venir","part" : "<i class='fas fa-sun'></i>Le Grand Désert","danger" : "Bronze - Argent","image" : "https://i.imgur.com/4c32KVw.jpg","monsters" :[ ]}, ];

let tag = window.location.hash;

menu();

if( tag == "")
{
    init();
}
else
{
    tri();
}

$('.content-nav a').click(function(){
    tag = this.hash;
    tri();
});


function init()
{
    for (let index = 0; index < $(regions).length; index++) {
        listMonster(regions[index]);
    }
}

function tri()
{
    let region = selectRegion();

    $('#monster').html("");
    $('#regionDesc').html("");

    regionDesc(region);
    listMonster(region);  
}

function selectRegion()
{
    for (let index = 0; index < $(regions).length; index++) {
        if ( regions[index].slug == tag.slice(1) )
        {
            return regions[index];
        }
    }
}

function regionDesc(region)
{
   $('#regionDesc').append(`
        <img src="${region.image}">
        <div class="content">
            <h2>${region.name}</h2>
            <h5><i class="fas fa-exclamation-triangle"></i><span>Dangerosité :</span> ${region.danger}</h5>
            <p>${region.description}</p>
            <a href=""><i class="fas fa-arrow-right"></i> Accéder à la catégorie</a>
        </div>
   `); 
}

function listMonster(region)
{
    for (let index2 = 0; index2 < $(region.monsters).length; index2++) {
        $('#monster').append(
            vignette($(region.monsters[index2])[0],region)
            );                
    }
}

function vignette (monster, region)
{
    return `<div class="vignette">
                <div class="picture">
                    <img src='${monster.image}'/>
                </div>
                <div class="corps">
                    <h3>${monster.name}</h3>   
                    <h5><i class="fas fa-map"></i><span>Région :</span> ${region.name}</h5>   
                    <h5><i class="fas fa-ring"></i><span>Rang :</span> ${monster.rang}</h5>   
                    <h5><i class="fas fa-gem"></i><span>Rareté :</span> ${monster.rarete}</h5>   
                    <h5><i class="fas fa-dice-d20"></i><span>Dé :</span> ${monster.deMin}-${monster.deMax} </h5>  
                    <p> ${monster.description} </p>
                </div>
            </div>`
    ;
}

function menu()
{
    let menu = `<div>`;

    for (let index = 0; index < $(regions).length; index++) {
        
        if (index ==  0)
        {
            menu += `<h3 class="rp">
                        ${regions[index].part}
                    </h3>
                    <ul>
                        <a href="#${regions[index].slug}"><li>${regions[index].name}</li></a>
            `;
        }
        else
        {
            if( regions[index].part == regions[index - 1].part )
            {
                menu += `<a href="#${regions[index].slug}"><li>${regions[index].name}</li></a>
                `;
            }
            else
            {
                menu += `   </ul>
                        </div>
                        <div>
                            <h3 class="rp">
                                ${regions[index].part}
                            </h3>
                            <ul>
                                <a href="#${regions[index].slug}"><li>${regions[index].name}</li></a>
                `;
            }
        }
    }
    $('.content-nav').append(menu);
}

(()=>{
    $('#arrowUp').click(()=>{
    document.body.scrollTop = 0; // For Safari
    document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
    });
})();
</script>
{% endblock %}
